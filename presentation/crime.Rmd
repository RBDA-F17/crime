---
title: "`r params$set_title`"
institution: "NYU"
date: "12/15/2017"
fontsize: 10pt
output: 
    slidy_presentation: 
      self_contained: true
      fig_retina: 100
      keep_md: yes
      footer: "`r params$set_title`"
    beamer_presentation:
      keep_tex: yes
      theme: "CambridgeUS"
      colortheme: "dove"
      fonttheme: "structurebold"
      includes:
        in_header: default.tex
params: 
    set_title: " Predicting crime rates using taxi rides in NYC"
    set_authors: "Carlos Petricioli (cpa253),
    Varsha Muralidharan  (vm1370) and
    Valerie Angulo (vaa238) "
---

## Big Data Analytics Symposium - Fall 2017

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = FALSE)
```

### Analytics Project

`r params$set_title`

### Team
<!-- incremental bulletes with >- -->
-  Carlos Petricioli (cpa253)

-  Varsha Muralidharan  (vm1370)

-  Valerie Angulo (vaa238)

### Abstract

- Our study looks at the relationship between crime rates and taxi usage in New York City. 
- Our hypothesis is that people are less likely to walk in areas subjectively deemed more dangerous and will instead opt to use more reliable and immediate transportation such as designated taxis. 
- WE FOUND THAT ____. 

## Motivation

### Typical users of this application
The scientific community, law enforcement, those in public transportation 

### Beneficiaries of this application
Members of the community and tourists, law enforcement 

### Importance of this analytic
- This analytic can help law enforcement predict areas of crime based on New Yorkers transportation habits. Law enforcement officials may be able to predict which areas will have a higher rate of crime in the future.
- People who live in an area are aware of the safety of their surroundings and this awareness can be represented by how comfortable residents may be in walking or taking the subway versus taking more immediate, more expensive, modes of transportation such as taxis. 
- This analytic can benefit the community and tourists by influencing their current and future transportation behaviors 


## Data Sources


### Taxi rides data from TLC [(*Link*)](http://www.nyc.gov/html/tlc/html/about/trip_record_data.shtml)


- It covers years from 2009 to June 2017.

- The yellow taxi trip records include:

  + pick-up and drop-off dates/times, 
  + pick-up and drop-off locations, 
  + trip distance,
  + itemized fares, 
  + rate types, 
  + payment type, 
  + passenger counts. 

- *Data Size*: 250 GB

***

### NYPD Complaint Data  [(*Link 1,*](https://data.cityofnewyork.us/Public-Safety/NYPD-Complaint-Data-Historic/qgea-i56i) [*Link 2)*](https://data.cityofnewyork.us/Public-Safety/NYPD-Complaint-Data-Current-YTD/5uac-w243)

- This dataset includes all valid felony, misdemeanor, and violation crimes reported to the New York City Police Department (NYPD) from 2006 to year to date data.

- *Data Size*:  1.5 GB

### NOAA Weather stations data [*(Link)*](https://www.ncdc.noaa.gov/isd)

The *Integrated Surface Database (ISD)* consists of global hourly ansynoptic observations compiled from numerous sources into a single common ASCII format and common data model.

- ISD's complete history of hour-by-hour readings for one user-specified weather stations

- We selected:
  + Central Park
  + JFK 
  + Laguardia

- *Data Size*:  165 MB

## Design Diagram

\begin{center}
\includegraphics[height=.6\textheight]{img/DesignFlowDiagram.jpg}
\end{center}

### Platform: 
- NYU HPC cluster (Dumbo)

## Obstacles

### Cleaning the data: Taxis

>- The **taxi data** (250 GB) was the most challenging to clean.

>- Inconsistencies in columns: extra columns for some years.

>- Rows with extra commas: avoiding an easy parse.

>- Row values for each year were not that dirty but the data values were completely different for different years.

>- The dictionary that defines the labels refers to the data from 2017, so we needed to figure out the meaning of labels for previous years.

>- Dates needed to be cleaned. (**24:00:00 vs 00:00:00**)

>- Meaningful interpretations of other dates could not be made for certain records and these records had to be filtered.

***

### Cleaning the data: Taxis

>- To figure this out we needed to iterate through every row of the data because new things came up every time we thought we were done with the cleaning.
  >- Even after we cleaned all the categorical variables and we thought we were done, many numerical inconsistencies appeared.
  >- Longitude/Latitude, like not even in NY or simply null.
  >- Negative, but consistent values for amounts.
  >- Weird trip distances, like greater than 1000 miles.
  >- Exorbitant total amounts (which might not be a problem because most were negotiated fares)

***

### Cleaning the data: Taxis
  >- 2016 and 2017 do not have longitude and latitude, just zone id. 
  >- This became one of the greater obstacles, because we needed to assign a zone id to all the previous years. 
  >- About 1.2 billion x 14 thousand $\approx$ 16,800 $\approx$ 2 1.6x10^ 13 distances computed (just for pick-up) 
  \begin{figure}
  \label{fig:zones}
    \centering
    \begin{subfigure}[t]{0.45\textwidth}
        \centering
        \label{fig:zones_shape}
        \includegraphics[height=1.4in]{../latex/images/taxi_zones_shape}
        \caption{Shape}
    \end{subfigure}%
    ~ 
    \begin{subfigure}[t]{0.45\textwidth}
        \centering
        \label{fig:zones_raster}
        \includegraphics[height=1.4in]{../latex/images/taxi_zones_raster}
        \caption{Raster}
    \end{subfigure}
    \caption{NYC Taxi zones file formats}
  \end{figure}

***

\begin{figure}
    \begin{subfigure}[t]{0.8\textwidth}
        \centering
        \label{fig:zones_both}
        \includegraphics[width=0.5\textwidth]{../latex/images/both}
        \caption{Both}
    \end{subfigure}
    \caption{NYC Taxi zones file formats}
\end{figure}

***

### Cleaning the data: Crime

- Crime data was reasonably clean. 
- The most challenging factor here was that we had a lot of missing values for some columns so we needed to setup a schema that accepted this fact.

### Cleaning the data: Weather

- Weather data was the most decent. 
- We basically just needed made sure that the data was clean which was the case.
- The only major issue was to figure out a way to assign weather data to the taxis.


***

### Joining the data

>- In the cleaning process we assigned taxi zones for taxi pickup and drop-off locations.

>- So we repeated this process but this time instead of assigning zones we assigned a station (JFK, La Guardia, Central Park) by computing the min distance from the pickup locations (long/lat) to the weather station.
>- We had another problem here because we did not had (long/lat) for the recent data. 
>- So, we estimated the centroids on the pick-up zones and then computed the min distance to the weather stations.

>- Finally taxis were joined to crime by using time periods of one hour. 
 

## Goodness

### Consistent data
- One of our main concerns was that the data  
Some of the taxi and crime data records had incorrectly entered/ambigious date/time columns. We tried to identify the correct dates and times for most of them so that we wouldnâ€™t have to throw away those records
- We had to make sure that the three data sets were related by zone

### model testing
we made sure that --

## Results
  3 results, insights, observations, outcomes

1. Result 1

2. Result 2

3. Result 3


## Summary

- We collected NYC taxi trip data, NYC crime data and weather data from Central Park, JFK and LaGuardia
- We joined together the data sets through taxi zones (taxi_zone_id) and hourly_data
- Our main questions revolve around whether taxi usage depends on crime rate in a specific zone, how much weather plays a part in the relationship between taxi usage and crime and how the distance of the trip affects taxi usage in relationship to crime
- WE FOUND THAT ______________

## Acknowledgements


Thank you to everyone at NYU HPC Support for helping us with questions and problems we encountered during this project. Special thanks to Santhosh Konda <hpc@nyu.edu> for responding so quickly to our e-mails!


## References

\begin{thebibliography}{1}

\bibitem{Bendler14}
J.~Bendler, T.~Brandt, S.~Wagner, and D.~Neumann.
\newblock Investigating crime-to-twitter relationships in urban environments -
  facilitating a virtual neighborhood watch.
\newblock In M.~Avital, J.~M. Leimeister, and U.~Schultze, editors, {\em ECIS},
  2014.

\bibitem{Wang16}
H.~Wang, D.~Kifer, C.~Graif, and Z.~Li.
\newblock Crime rate inference with big data.
\newblock In {\em Proceedings of the 22Nd ACM SIGKDD International Conference
  on Knowledge Discovery and Data Mining}, KDD '16, pages 635--644, New York,
  NY, USA, 2016. ACM.

\bibitem{Traunmueller14}
M.~Traunmueller, G.~Quattrone, and L.~Capra.
\newblock {\em Mining Mobile Phone Data to Investigate Urban Crime Theories at
  Scale}, pages 396--411.
\newblock Springer International Publishing, Cham, 2014.
\end{thebibliography}

*** 

\begin{thebibliography}{1}
\bibitem{OUAC}
A.~Bogomolov, B.~Lepri, J.~Staiano, N.~Oliver, F.~Pianesi, and A.~Pentland.
\newblock Once upon a crime: Towards crime prediction from demographics and
  mobile data, Sep 2014.

\bibitem{Chainey}
S.~Chainey, L.~Tompson, and S.~Uhlig.
\newblock {The Utility of Hotspot Mapping for Predicting Spatial Patterns of
  Crime}.
\newblock {\em Security Journal}, 21(1-2):4--28, Feb 2008.

\bibitem{visCrime}
T.~Nakaya and K.~Yano.
\newblock Visualising crime clusters in a space-time cube: An exploratory
  data-analysis approach using space-time kernel density estimation and scan
  statistics.
\newblock {\em Transactions in GIS}, 14(3):223--239, 2010.
\end{thebibliography}

# Thank you!
